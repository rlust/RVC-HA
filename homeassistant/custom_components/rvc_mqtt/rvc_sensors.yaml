sensor:
  # Main House Battery Bank DC Source Status
  - platform: mqtt
    unique_id: main_house_battery_dc_voltage
    name: "Main House Battery Voltage"
    state_topic: "RVC/DC_SOURCE_STATUS_1/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'dc voltage' in value_json %}
        {{ value_json['dc voltage'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "V"
    state_class: "measurement"
    icon: "mdi:car-battery"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/DC_SOURCE_STATUS_1/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - main_house_battery_bank
      name: "Main House Battery Bank"
      manufacturer: "RVC"
      model: "DC_SOURCE_STATUS_1"

  # Main House Battery DC Source Raw Data
  - platform: mqtt
    unique_id: main_house_battery_dc_source_raw
    name: "Main House Battery DC Source Raw Data"
    state_topic: "RVC/DC_SOURCE_STATUS_1/1"
    value_template: >-
      {% if value_json is defined %}
        Voltage: {{ value_json['dc voltage'] }} V | Current: {{ value_json['dc current'] }} A | Priority: {{ value_json['device priority definition'] }} | Instance: {{ value_json['instance definition'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - main_house_battery_bank
      name: "Main House Battery Bank"
      manufacturer: "RVC"
      model: "DC_SOURCE_STATUS_1"

  # Main House Battery DC Current
  - platform: mqtt
    unique_id: main_house_battery_dc_current
    name: "Main House Battery DC Current"
    state_topic: "RVC/DC_SOURCE_STATUS_1/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'dc current' in value_json %}
        {{ value_json['dc current'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "A"
    state_class: "measurement"
    icon: "mdi:current-dc"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/DC_SOURCE_STATUS_1/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - main_house_battery_bank
      name: "Main House Battery Bank"
      manufacturer: "RVC"
      model: "DC_SOURCE_STATUS_1"

  # Main House Battery DC Source Status 2
  - platform: mqtt
    unique_id: main_house_battery_dc_source2_temp
    name: "Main House Battery Source Temperature"
    state_topic: "RVC/DC_SOURCE_STATUS_2/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'source temperature F' in value_json %}
        {{ value_json['source temperature F'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "°F"
    state_class: "measurement"
    icon: "mdi:thermometer"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/DC_SOURCE_STATUS_2/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - main_house_battery_bank
      name: "Main House Battery Bank"
      manufacturer: "RVC"
      model: "DC_SOURCE_STATUS_2"

  # Main House Battery DC Source 2 Raw Data
  - platform: mqtt
    unique_id: main_house_battery_dc_source2_raw
    name: "Main House Battery DC Source 2 Raw Data"
    state_topic: "RVC/DC_SOURCE_STATUS_2/1"
    value_template: >-
      {% if value_json is defined %}
        Temp F: {{ value_json['source temperature F'] }} °F | Priority: {{ value_json['device priority definition'] }} | Instance: {{ value_json['instance definition'] }} | SOC: {{ value_json['state of charge'] }} | Time Remain: {{ value_json['time remaining'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - main_house_battery_bank
      name: "Main House Battery Bank"
      manufacturer: "RVC"
      model: "DC_SOURCE_STATUS_2"

  # Main House Battery DC Current (Source 2)
  - platform: mqtt
    unique_id: main_house_battery_dc_current_2
    name: "Main House Battery DC Current (Source 2)"
    state_topic: "RVC/DC_SOURCE_STATUS_2/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'dc current' in value_json %}
        {{ value_json['dc current'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "A"
    state_class: "measurement"
    icon: "mdi:current-dc"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/DC_SOURCE_STATUS_2/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - main_house_battery_bank
      name: "Main House Battery Bank"
      manufacturer: "RVC"
      model: "DC_SOURCE_STATUS_2"


  # Inverter DC Status Voltage
  - platform: mqtt
    unique_id: inverter_dc_status_voltage
    name: "Inverter DC Voltage"
    state_topic: "RVC/INVERTER_DC_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'dc voltage' in value_json %}
        {{ value_json['dc voltage'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "V"
    state_class: "measurement"
    icon: "mdi:car-battery"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/INVERTER_DC_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - inverter_dc_status
      name: "Inverter DC Status"
      manufacturer: "RVC"
      model: "INVERTER_DC_STATUS"

  # Inverter DC Status Amperage
  - platform: mqtt
    unique_id: inverter_dc_status_amperage
    name: "Inverter DC Amperage"
    state_topic: "RVC/INVERTER_DC_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'dc amperage' in value_json %}
        {{ value_json['dc amperage'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "A"
    state_class: "measurement"
    icon: "mdi:current-dc"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/INVERTER_DC_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - inverter_dc_status
      name: "Inverter DC Status"
      manufacturer: "RVC"
      model: "INVERTER_DC_STATUS"

  # Inverter DC Status Raw Data
  - platform: mqtt
    unique_id: inverter_dc_status_raw
    name: "Inverter DC Status Raw Data"
    state_topic: "RVC/INVERTER_DC_STATUS/1"
    value_template: >-
      {% if value_json is defined %}
        Voltage: {{ value_json['dc voltage'] }} V | Amperage: {{ value_json['dc amperage'] }} A | Instance: {{ value_json['instance'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - inverter_dc_status
      name: "Inverter DC Status"
      manufacturer: "RVC"
      model: "INVERTER_DC_STATUS"

  # AC Source Status
  - platform: mqtt
    unique_id: ac_source_status_voltage
    name: "AC Source Voltage"
    state_topic: "RVC/AC_SOURCE_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'ac voltage' in value_json %}
        {{ value_json['ac voltage'] }}
      {% else %}
        {{ value_json | tojson }}
      {% endif %}
    unit_of_measurement: "V"
    state_class: "measurement"
    icon: "mdi:flash"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/AC_SOURCE_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - ac_source_status
      name: "AC Source Status"
      manufacturer: "RVC"
      model: "AC_SOURCE_STATUS"

  # AC Load Status 208
  - platform: mqtt
    unique_id: ac_load_status_208
    name: "AC Load Status 208"
    state_topic: "RVC/AC_LOAD_STATUS/208"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating status' in value_json %}
        {{ value_json['operating status'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:flash"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/AC_LOAD_STATUS/208"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - ac_load_status_208
      name: "AC Load Status 208"
      manufacturer: "RVC"
      model: "AC_LOAD_STATUS"

  # AC Load Status 209
  - platform: mqtt
    unique_id: ac_load_status_209
    name: "AC Load Status 209"
    state_topic: "RVC/AC_LOAD_STATUS/209"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating status' in value_json %}
        {{ value_json['operating status'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:flash"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/AC_LOAD_STATUS/209"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - ac_load_status_209
      name: "AC Load Status 209"
      manufacturer: "RVC"
      model: "AC_LOAD_STATUS"

  # AC Load Status 210
  - platform: mqtt
    unique_id: ac_load_status_210
    name: "AC Load Status 210"
    state_topic: "RVC/AC_LOAD_STATUS/210"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating status' in value_json %}
        {{ value_json['operating status'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:flash"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/AC_LOAD_STATUS/210"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - ac_load_status_210
      name: "AC Load Status 210"
      manufacturer: "RVC"
      model: "AC_LOAD_STATUS"

  # AC Load Status 211
  - platform: mqtt
    unique_id: ac_load_status_211
    name: "AC Load Status 211"
    state_topic: "RVC/AC_LOAD_STATUS/211"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating status' in value_json %}
        {{ value_json['operating status'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:flash"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/AC_LOAD_STATUS/211"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - ac_load_status_211
      name: "AC Load Status 211"
      manufacturer: "RVC"
      model: "AC_LOAD_STATUS"

  # AC Load Status 212
  - platform: mqtt
    unique_id: ac_load_status_212
    name: "AC Load Status 212"
    state_topic: "RVC/AC_LOAD_STATUS/212"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating status' in value_json %}
        {{ value_json['operating status'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:flash"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/AC_LOAD_STATUS/212"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - ac_load_status_212
      name: "AC Load Status 212"
      manufacturer: "RVC"
      model: "AC_LOAD_STATUS"

  # AC Load Status 213
  - platform: mqtt
    unique_id: ac_load_status_213
    name: "AC Load Status 213"
    state_topic: "RVC/AC_LOAD_STATUS/213"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating status' in value_json %}
        {{ value_json['operating status'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:flash"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/AC_LOAD_STATUS/213"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - ac_load_status_213
      name: "AC Load Status 213"
      manufacturer: "RVC"
      model: "AC_LOAD_STATUS"

  # AC Load Status 214
  - platform: mqtt
    unique_id: ac_load_status_214
    name: "AC Load Status 214"
    state_topic: "RVC/AC_LOAD_STATUS/214"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating status' in value_json %}
        {{ value_json['operating status'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:flash"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/AC_LOAD_STATUS/214"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - ac_load_status_214
      name: "AC Load Status 214"
      manufacturer: "RVC"
      model: "AC_LOAD_STATUS"


  # Generator Status 1
  - platform: mqtt
    unique_id: generator_status_1
    name: "Generator Status 1"
    state_topic: "RVC/GENERATOR_STATUS_1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'status definition' in value_json %}
        {{ value_json['status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:generator"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/GENERATOR_STATUS_1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - generator_status_1
      name: "Generator Status 1"
      manufacturer: "RVC"
      model: "GENERATOR_STATUS_1"

  # Charger Status
  - platform: mqtt
    unique_id: charger_status
    name: "Charger Status"
    state_topic: "RVC/CHARGER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating state definition' in value_json %}
        {{ value_json['operating state definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:battery-charging"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CHARGER_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - charger_status
      name: "Charger Status"
      manufacturer: "RVC"
      model: "CHARGER_STATUS"

  # DC Load Status
  - platform: mqtt
    unique_id: dc_load_status
    name: "DC Load Status"
    state_topic: "RVC/DC_LOAD_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'dc load' in value_json %}
        {{ value_json['dc load'] }}
      {% else %}
        {{ value_json | tojson }}
      {% endif %}
    icon: "mdi:flash-outline"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/DC_LOAD_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - dc_load_status
      name: "DC Load Status"
      manufacturer: "RVC"
      model: "DC_LOAD_STATUS"

  # Thermostat Status
  - platform: mqtt
    unique_id: thermostat_status
    name: "Thermostat Status"
    state_topic: "RVC/THERMOSTAT_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'temperature' in value_json %}
        {{ value_json['temperature'] }}
      {% else %}
        {{ value_json | tojson }}
      {% endif %}
    unit_of_measurement: "°F"
    state_class: "measurement"
    icon: "mdi:thermostat"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/THERMOSTAT_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - thermostat_status
      name: "Thermostat Status"
      manufacturer: "RVC"
      model: "THERMOSTAT_STATUS"

  # Engine Status
  - platform: mqtt
    unique_id: engine_status
    name: "Engine Status"
    state_topic: "RVC/ENGINE_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'engine state' in value_json %}
        {{ value_json['engine state'] }}
      {% else %}
        {{ value_json | tojson }}
      {% endif %}
    icon: "mdi:engine"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/ENGINE_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - engine_status
      name: "Engine Status"
      manufacturer: "RVC"
      model: "ENGINE_STATUS"

  # Chassis Mobility Status
  - platform: mqtt
    unique_id: chassis_mobility_status
    name: "Chassis Mobility Status"
    state_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'park brake status definition' in value_json %}
        {{ value_json['park brake status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:car"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - chassis_mobility_status
      name: "Chassis Mobility Status"
      manufacturer: "RVC"
      model: "CHASSIS_MOBILITY_STATUS"

  # Transmission Current Gear
  - platform: mqtt
    unique_id: transmission_current_gear
    name: "Transmission Current Gear"
    state_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'transmission current gear definition' in value_json %}
        {{ value_json['transmission current gear definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:car-shift-pattern"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - transmission_current_gear
      name: "Transmission Current Gear"
      manufacturer: "RVC"
      model: "CHASSIS_MOBILITY_STATUS"

  # Transmission Gear Selected
  - platform: mqtt
    unique_id: transmission_gear_selected
    name: "Transmission Gear Selected"
    state_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'transmission gear selected definition' in value_json %}
        {{ value_json['transmission gear selected definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:car-shift-pattern"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - transmission_gear_selected
      name: "Transmission Gear Selected"
      manufacturer: "RVC"
      model: "CHASSIS_MOBILITY_STATUS"

  # Transmission Lock Status
  - platform: mqtt
    unique_id: transmission_lock_status
    name: "Transmission Lock Status"
    state_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'transmission lock status definition' in value_json %}
        {{ value_json['transmission lock status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:lock"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - transmission_lock_status
      name: "Transmission Lock Status"
      manufacturer: "RVC"
      model: "CHASSIS_MOBILITY_STATUS"

  # Engine Lock Status
  - platform: mqtt
    unique_id: engine_lock_status
    name: "Engine Lock Status"
    state_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'engine lock status definition' in value_json %}
        {{ value_json['engine lock status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:engine-off"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - engine_lock_status
      name: "Engine Lock Status"
      manufacturer: "RVC"
      model: "CHASSIS_MOBILITY_STATUS"

  # Engine RPMs
  - platform: mqtt
    unique_id: engine_rpms
    name: "Engine RPMs"
    state_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'engine rpms' in value_json %}
        {{ value_json['engine rpms'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "rpm"
    icon: "mdi:rotate-right"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - engine_rpms
      name: "Engine RPMs"
      manufacturer: "RVC"
      model: "CHASSIS_MOBILITY_STATUS"

  # Vehicle Speed
  - platform: mqtt
    unique_id: vehicle_speed
    name: "Vehicle Speed"
    state_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'vehicle speed' in value_json %}
        {{ value_json['vehicle speed'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "km/h"
    icon: "mdi:speedometer"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CHASSIS_MOBILITY_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - vehicle_speed
      name: "Vehicle Speed"
      manufacturer: "RVC"
      model: "CHASSIS_MOBILITY_STATUS"

  # Level Sensor
  - platform: mqtt
    unique_id: level_sensor
    name: "Level Sensor"
    state_topic: "RVC/LEVEL_SENSOR/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'level' in value_json %}
        {{ ((value_json['level'] | float) / 24 * 100) | round(0) }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "%"
    state_class: "measurement"
    icon: "mdi:water"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/LEVEL_SENSOR/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - level_sensor
      name: "Level Sensor"
      manufacturer: "RVC"
      model: "LEVEL_SENSOR"

  # Black Water Level Sensor
  - platform: mqtt
    unique_id: black_water_level_sensor
    name: "Black Water Level"
    state_topic: "RVC/BLACK_WATER_LEVEL_SENSOR/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'level' in value_json %}
        {{ ((value_json['level'] | float) / 24 * 100) | round(0) }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "%"
    state_class: "measurement"
    icon: "mdi:water"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/BLACK_WATER_LEVEL_SENSOR/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - black_water_level_sensor
      name: "Black Water Level Sensor"
      manufacturer: "RVC"
      model: "BLACK_WATER_LEVEL_SENSOR"

  # Fresh Water Tank Level Sensor
  - platform: mqtt
    unique_id: fresh_water_tank_level
    name: "Fresh Water Tank Level"
    state_topic: "RVC/TANK_STATUS/0"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'relative level' in value_json and 'resolution' in value_json and (value_json['resolution'] | float) != 0 %}
        {{ ((value_json['relative level'] | float) / (value_json['resolution'] | float) * 100) | round(0) }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "%"
    state_class: "measurement"
    icon: "mdi:water"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/TANK_STATUS/0"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - fresh_water_tank_level
      name: "Fresh Water Tank Level"
      manufacturer: "RVC"
      model: "TANK_STATUS"

  # Black Water Tank Level Sensor
  - platform: mqtt
    unique_id: black_water_tank_level
    name: "Black Water Tank Level"
    state_topic: "RVC/TANK_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'relative level' in value_json and 'resolution' in value_json and (value_json['resolution'] | float) != 0 %}
        {{ ((value_json['relative level'] | float) / (value_json['resolution'] | float) * 100) | round(0) }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "%"
    state_class: "measurement"
    icon: "mdi:water"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/TANK_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - black_water_tank_level
      name: "Black Water Tank Level"
      manufacturer: "RVC"
      model: "TANK_STATUS"

  # Grey Water Tank Level Sensor
  - platform: mqtt
    unique_id: grey_water_tank_level
    name: "Grey Water Tank Level"
    state_topic: "RVC/TANK_STATUS/2"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'relative level' in value_json and 'resolution' in value_json and (value_json['resolution'] | float) != 0 %}
        {{ ((value_json['relative level'] | float) / (value_json['resolution'] | float) * 100) | round(0) }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "%"
    state_class: "measurement"
    icon: "mdi:water"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/TANK_STATUS/2"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - grey_water_tank_level
      name: "Grey Water Tank Level"
      manufacturer: "RVC"
      model: "TANK_STATUS"

  # Circulation Pump Output Status
  - platform: mqtt
    unique_id: circulation_pump_output_status
    name: "Circulation Pump Output Status"
    state_topic: "RVC/CIRCULATION_PUMP_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'output status definition' in value_json %}
        {{ value_json['output status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:pump"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CIRCULATION_PUMP_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - circulation_pump_output_status
      name: "Circulation Pump Output Status"
      manufacturer: "RVC"
      model: "CIRCULATION_PUMP_STATUS"

  # Circulation Pump Overcurrent Status
  - platform: mqtt
    unique_id: circulation_pump_overcurrent_status
    name: "Circulation Pump Overcurrent Status"
    state_topic: "RVC/CIRCULATION_PUMP_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'pump overcurrent status definition' in value_json %}
        {{ value_json['pump overcurrent status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:alert-circle"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CIRCULATION_PUMP_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - circulation_pump_overcurrent_status
      name: "Circulation Pump Overcurrent Status"
      manufacturer: "RVC"
      model: "CIRCULATION_PUMP_STATUS"

  # Circulation Pump Temperature Status
  - platform: mqtt
    unique_id: circulation_pump_temperature_status
    name: "Circulation Pump Temperature Status"
    state_topic: "RVC/CIRCULATION_PUMP_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'pump temperature status definition' in value_json %}
        {{ value_json['pump temperature status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:thermometer"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CIRCULATION_PUMP_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - circulation_pump_temperature_status
      name: "Circulation Pump Temperature Status"
      manufacturer: "RVC"
      model: "CIRCULATION_PUMP_STATUS"

  # Circulation Pump Undercurrent Status
  - platform: mqtt
    unique_id: circulation_pump_undercurrent_status
    name: "Circulation Pump Undercurrent Status"
    state_topic: "RVC/CIRCULATION_PUMP_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'pump undercurrent status definition' in value_json %}
        {{ value_json['pump undercurrent status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:current-dc"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CIRCULATION_PUMP_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - circulation_pump_undercurrent_status
      name: "Circulation Pump Undercurrent Status"
      manufacturer: "RVC"
      model: "CIRCULATION_PUMP_STATUS"

  # Circulation Pump Composite Status
  - platform: mqtt
    unique_id: circulation_pump_composite_status
    name: "Circulation Pump Composite Status"
    state_topic: "RVC/CIRCULATION_PUMP_STATUS"
    value_template: >-
      {% if value_json is defined and value_json is mapping %}
        Status: {{ value_json['output status definition'] if 'output status definition' in value_json else 'unknown' }} | Temp: {{ value_json['pump temperature status definition'] if 'pump temperature status definition' in value_json else 'unknown' }} | Overcurrent: {{ value_json['pump overcurrent status definition'] if 'pump overcurrent status definition' in value_json else 'unknown' }} | Undercurrent: {{ value_json['pump undercurrent status definition'] if 'pump undercurrent status definition' in value_json else 'unknown' }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:pump"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/CIRCULATION_PUMP_STATUS"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - circulation_pump_composite_status
      name: "Circulation Pump Composite Status"
      manufacturer: "RVC"
      model: "CIRCULATION_PUMP_STATUS"

  # Alarm Status
  - platform: mqtt
    unique_id: alarm_status
    name: "Alarm Status"
    state_topic: "RVC/ALARM_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'alarm state' in value_json %}
        {{ value_json['alarm state'] }}
      {% else %}
        {{ value_json | tojson }}
      {% endif %}
    icon: "mdi:alarm-light"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/ALARM_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - alarm_status
      name: "Alarm Status"
      manufacturer: "RVC"
      model: "ALARM_STATUS"

  # Power Status
  - platform: mqtt
    unique_id: power_status
    name: "Power Status"
    state_topic: "RVC/POWER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'power state' in value_json %}
        {{ value_json['power state'] }}
      {% else %}
        {{ value_json | tojson }}
      {% endif %}
    icon: "mdi:power-plug"
    qos: 0
    expire_after: 600
    force_update: true
    json_attributes_topic: "RVC/POWER_STATUS/1"
    json_attributes_template: >-
      {{ value_json | tojson }}
    device:
      identifiers:
        - power_status
      name: "Power Status"
      manufacturer: "RVC"
      model: "POWER_STATUS"

  # Fresh Water Tank Sensors
  - platform: mqtt
    unique_id: fresh_water_tank_level_relative
    name: "Fresh Water Tank Level"
    state_topic: "RVC/TANK_STATUS/0"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'relative level' in value_json %}
        {{ value_json['relative level'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "%"
    state_class: "measurement"
    icon: "mdi:water-percent"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - fresh_water_tank
      name: "RV Fresh Water Tank"
      manufacturer: "RVC"
      model: "RVC Tank System"

  # Fresh Water Tank raw data for troubleshooting - summary version
  - platform: mqtt
    unique_id: fresh_water_tank_raw
    name: "Fresh Water Tank Raw Data"
    state_topic: "RVC/TANK_STATUS/0"
    value_template: >-
      {% if value_json is defined %}
        Level: {{ value_json['relative level'] }}% | Instance: {{ value_json['instance'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - fresh_water_tank
      name: "RV Fresh Water Tank"
      manufacturer: "RVC"
      model: "RVC Tank System"
      
  # Black Waste Tank Sensors
  - platform: mqtt
    unique_id: black_waste_tank_level_relative
    name: "Black Waste Tank Level"
    state_topic: "RVC/TANK_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'relative level' in value_json %}
        {{ value_json['relative level'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "%"
    state_class: "measurement"
    icon: "mdi:water-percent"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - black_waste_tank
      name: "RV Black Waste Tank"
      manufacturer: "RVC"
      model: "RVC Tank System"

  # Black Waste Tank raw data for troubleshooting - summary version
  - platform: mqtt
    unique_id: black_waste_tank_raw
    name: "Black Waste Tank Raw Data"
    state_topic: "RVC/TANK_STATUS/1"
    value_template: >-
      {% if value_json is defined %}
        Level: {{ value_json['relative level'] }}% | Instance: {{ value_json['instance'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - black_waste_tank
      name: "RV Black Waste Tank"
      manufacturer: "RVC"
      model: "RVC Tank System"
      
  # Gray Waste Tank Sensors
  - platform: mqtt
    unique_id: gray_waste_tank_level_relative
    name: "Gray Waste Tank Level"
    state_topic: "RVC/TANK_STATUS/2"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'relative level' in value_json %}
        {{ value_json['relative level'] }}
      {% else %}
        unknown
      {% endif %}
    unit_of_measurement: "%"
    state_class: "measurement"
    icon: "mdi:water-percent"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - gray_waste_tank
      name: "RV Gray Waste Tank"
      manufacturer: "RVC"
      model: "RVC Tank System"

  # Gray Waste Tank raw data for troubleshooting - summary version
  - platform: mqtt
    unique_id: gray_waste_tank_raw
    name: "Gray Waste Tank Raw Data"
    state_topic: "RVC/TANK_STATUS/2"
    value_template: >-
      {% if value_json is defined %}
        Level: {{ value_json['relative level'] }}% | Instance: {{ value_json['instance'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - gray_waste_tank
      name: "RV Gray Waste Tank"
      manufacturer: "RVC"
      model: "RVC Tank System"
      
  # Air Conditioner Status Sensors
  - platform: mqtt
    unique_id: ac_front_operating_mode
    name: "AC Front Operating Mode"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating mode definition' in value_json %}
        {{ value_json['operating mode definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:air-conditioner"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_front
      name: "RV AC Front"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  - platform: mqtt
    unique_id: ac_front_fan_speed
    name: "AC Front Fan Speed"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'fan speed' in value_json %}
        {{ value_json['fan speed'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:fan"
    state_class: "measurement"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_front
      name: "RV AC Front"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  - platform: mqtt
    unique_id: ac_front_output_level
    name: "AC Front Output Level"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'air conditioning output level' in value_json %}
        {{ value_json['air conditioning output level'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:snowflake-thermometer"
    state_class: "measurement"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_front
      name: "RV AC Front"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  # Raw data sensor for troubleshooting - summary version
  - platform: mqtt
    unique_id: ac_front_raw_data
    name: "AC Front Raw Data"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/1"
    value_template: >-
      {% if value_json is defined %}
        Mode: {{ value_json['operating mode definition'] }} | Output: {{ value_json['air conditioning output level'] }} | Fan: {{ value_json['fan speed'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_front
      name: "RV AC Front"
      manufacturer: "RVC"
      model: "RVC A/C System"

  # AC Mid Sensors
  - platform: mqtt
    unique_id: ac_mid_operating_mode
    name: "AC Mid Operating Mode"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/2"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating mode definition' in value_json %}
        {{ value_json['operating mode definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:air-conditioner"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_mid
      name: "RV AC Mid"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  - platform: mqtt
    unique_id: ac_mid_fan_speed
    name: "AC Mid Fan Speed"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/2"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'fan speed' in value_json %}
        {{ value_json['fan speed'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:fan"
    state_class: "measurement"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_mid
      name: "RV AC Mid"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  - platform: mqtt
    unique_id: ac_mid_output_level
    name: "AC Mid Output Level"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/2"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'air conditioning output level' in value_json %}
        {{ value_json['air conditioning output level'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:snowflake-thermometer"
    state_class: "measurement"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_mid
      name: "RV AC Mid"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  # Raw data sensor for troubleshooting - summary version
  - platform: mqtt
    unique_id: ac_mid_raw_data
    name: "AC Mid Raw Data"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/2"
    value_template: >-
      {% if value_json is defined %}
        Mode: {{ value_json['operating mode definition'] }} | Output: {{ value_json['air conditioning output level'] }} | Fan: {{ value_json['fan speed'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_mid
      name: "RV AC Mid"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  # AC Rear Sensors
  - platform: mqtt
    unique_id: ac_rear_operating_mode
    name: "AC Rear Operating Mode"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/3"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating mode definition' in value_json %}
        {{ value_json['operating mode definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:air-conditioner"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_rear
      name: "RV AC Rear"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  - platform: mqtt
    unique_id: ac_rear_fan_speed
    name: "AC Rear Fan Speed"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/3"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'fan speed' in value_json %}
        {{ value_json['fan speed'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:fan"
    state_class: "measurement"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_rear
      name: "RV AC Rear"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  - platform: mqtt
    unique_id: ac_rear_output_level
    name: "AC Rear Output Level"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/3"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'air conditioning output level' in value_json %}
        {{ value_json['air conditioning output level'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:snowflake-thermometer"
    state_class: "measurement"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_rear
      name: "RV AC Rear"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  # Raw data sensor for troubleshooting - summary version
  - platform: mqtt
    unique_id: ac_rear_raw_data
    name: "AC Rear Raw Data"
    state_topic: "RVC/AIR_CONDITIONER_STATUS/3"
    value_template: >-
      {% if value_json is defined %}
        Mode: {{ value_json['operating mode definition'] }} | Output: {{ value_json['air conditioning output level'] }} | Fan: {{ value_json['fan speed'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_air_conditioner_rear
      name: "RV AC Rear"
      manufacturer: "RVC"
      model: "RVC A/C System"
      
  # Water Heater Status Sensors
  - platform: mqtt
    unique_id: water_heater_operating_mode
    name: "Water Heater Operating Mode"
    state_topic: "RVC/WATERHEATER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'operating modes definition' in value_json %}
        {{ value_json['operating modes definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:water-boiler"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_water_heater
      name: "RV Water Heater"
      manufacturer: "RVC"
      model: "RVC Water Heater System"
      
  - platform: mqtt
    unique_id: water_heater_temperature
    name: "Water Heater Temperature"
    state_topic: "RVC/WATERHEATER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'water temperature' in value_json %}
        {{ value_json['water temperature'] }}
      {% else %}
        0
      {% endif %}
    unit_of_measurement: "°C"
    icon: "mdi:thermometer"
    device_class: "temperature"
    state_class: "measurement"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_water_heater
      name: "RV Water Heater"
      manufacturer: "RVC"
      model: "RVC Water Heater System"
      
  - platform: mqtt
    unique_id: water_heater_temperature_f
    name: "Water Heater Temperature (F)"
    state_topic: "RVC/WATERHEATER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'water temperature F' in value_json %}
        {{ value_json['water temperature F'] }}
      {% else %}
        0
      {% endif %}
    unit_of_measurement: "°F"
    icon: "mdi:thermometer"
    device_class: "temperature"
    state_class: "measurement"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_water_heater
      name: "RV Water Heater"
      manufacturer: "RVC"
      model: "RVC Water Heater System"
      
  - platform: mqtt
    unique_id: water_heater_burner_status
    name: "Water Heater Burner Status"
    state_topic: "RVC/WATERHEATER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'burner status definition' in value_json %}
        {{ value_json['burner status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:fire"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_water_heater
      name: "RV Water Heater"
      manufacturer: "RVC"
      model: "RVC Water Heater System"
      
  - platform: mqtt
    unique_id: water_heater_thermostat_status
    name: "Water Heater Thermostat Status"
    state_topic: "RVC/WATERHEATER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'thermostat status definition' in value_json %}
        {{ value_json['thermostat status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:thermostat"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_water_heater
      name: "RV Water Heater"
      manufacturer: "RVC"
      model: "RVC Water Heater System"
      
  # Raw data sensor for troubleshooting - summary version
  - platform: mqtt
    unique_id: water_heater_raw_data
    name: "Water Heater Raw Data"
    state_topic: "RVC/WATERHEATER_STATUS/1"
    value_template: >-
      {% if value_json is defined %}
        Mode: {{ value_json['operating modes definition'] }} | Temp: {{ value_json['water temperature'] }}°C ({{ value_json['water temperature F'] }}°F) | Burner: {{ value_json['burner status definition'] }} | Thermostat: {{ value_json['thermostat status definition'] }}
      {% else %}
        No data
      {% endif %}
    icon: "mdi:code-json"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_water_heater
      name: "RV Water Heater"
      manufacturer: "RVC"
      model: "RVC Water Heater System"
      
  # Individual payload attributes as separate sensors
  - platform: mqtt
    unique_id: water_heater_dc_power_status
    name: "Water Heater DC Power Status"
    state_topic: "RVC/WATERHEATER_STATUS/1"
    value_template: >-
      {% if value_json is defined and value_json is mapping and 'dc power failure status definition' in value_json %}
        {{ value_json['dc power failure status definition'] }}
      {% else %}
        unknown
      {% endif %}
    icon: "mdi:power-plug"
    qos: 0
    expire_after: 600
    force_update: true
    device:
      identifiers:
        - rv_water_heater
      name: "RV Water Heater"
      manufacturer: "RVC"
      model: "RVC Water Heater System"
